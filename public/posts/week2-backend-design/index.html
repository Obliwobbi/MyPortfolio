<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="h-full">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="en-us">
<script>
  
  (function () {
    const storedTheme = localStorage.getItem("theme");
    const systemPrefersLight = window.matchMedia("(prefers-color-scheme: light)").matches;
    const theme = storedTheme || (systemPrefersLight ? "light" : "dark");
    document.documentElement.setAttribute("data-theme", theme);
  })();
</script>
<title>Backend design - MORE CRUD! | Tobys Portfolio</title>
<meta
  name="description"
  content="
    Designing the Backend Domain - JPA, Relations, and Queries This phase of the project has focused entirely on building a solid backend foundation using Java, …
  
  ">


  <meta name="keywords" content="java, ORM, JPQL, database">



  <meta name="author" content="Toby Alexander West Mietke Hartzberg">



<link rel="canonical" href="http://localhost:1313/posts/week2-backend-design/">

<meta name="robots" content="index, follow">


<meta property="og:type" content="article">
<meta property="og:title" content="Backend design - MORE CRUD! | Tobys Portfolio">
<meta property="og:description" content="Designing the Backend Domain - JPA, Relations, and Queries This phase of the project has focused entirely on building a solid backend foundation using Java, …">
<meta property="og:url" content="http://localhost:1313/posts/week2-backend-design/">
<meta property="og:site_name" content="Tobys Portfolio"><meta property="article:published_time" content="2026-02-15T14:14:59&#43;01:00">
  <meta
    property="article:modified_time"
    content="2026-02-15T14:14:59&#43;01:00"><meta property="article:author" content="Toby Alexander West Mietke Hartzberg"><meta property="article:section" content="java"><meta property="article:tag" content="java"><meta property="article:tag" content="ORM"><meta property="article:tag" content="JPQL"><meta property="article:tag" content="database">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Backend design - MORE CRUD! | Tobys Portfolio">
<meta name="twitter:description" content="Designing the Backend Domain - JPA, Relations, and Queries This phase of the project has focused entirely on building a solid backend foundation using Java, …">

<script type="application/ld+json">










"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"author\":{\"@type\":\"Person\",\"name\":\"Toby Alexander West Mietke Hartzberg\"},\"dateModified\":\"2026-02-15T14:14:59+01:00\",\"datePublished\":\"2026-02-15T14:14:59+01:00\",\"description\":\"Designing the Backend Domain - JPA, Relations, and Queries This phase of the project has focused entirely on building a solid backend foundation using Java, …\",\"headline\":\"Backend design - MORE CRUD!\",\"image\":null,\"keywords\":[\"java\",\"ORM\",\"JPQL\",\"database\"],\"mainEntityOfPage\":{\"@id\":\"http://localhost:1313/posts/week2-backend-design/\",\"@type\":\"WebPage\"},\"publisher\":{\"@type\":\"Organization\",\"logo\":{\"@type\":\"ImageObject\",\"url\":null},\"name\":\"Tobys Portfolio\"}}"</script>



  
  
  
    
  
  
<script type="application/ld+json">"{\"@context\":\"https://schema.org\",\"@type\":\"BreadcrumbList\",\"itemListElement\":[{\"@type\":\"ListItem\",\"item\":\"http://localhost:1313/\",\"name\":\"Tobys Portfolio\",\"position\":1},{\"@type\":\"ListItem\",\"item\":\"http://localhost:1313/posts/\",\"name\":\"Posts\",\"position\":2},{\"@type\":\"ListItem\",\"item\":\"http://localhost:1313/posts/week2-backend-design/\",\"name\":\"Backend design - MORE CRUD!\",\"position\":3}]}"</script>







<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
  href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap"
  rel="stylesheet">


<link
  rel="stylesheet"
  href="/css/theme.min.a251f6659747f13720004e758411b578202d6d8c8dd101f6d21a21fb1bb104b2.css"
  integrity="sha256-olH2ZZdH8TcgAE51hBG1eCAtbYyN0QH20hoh&#43;xuxBLI=">

<link
    rel="stylesheet"
    href="/css/syntax-dark.min.b01037e5609e6260b74d6fcdd6d5131e8dcbc4d46d6ef4bfbe5a60bdfc1a9f30.css"
    integrity="sha256-sBA35WCeYmC3TW/N1tUTHo3LxNRtbvS/vlpgvfwanzA="
    id="syntax-dark-theme"
    class="syntax-theme"><link
    rel="stylesheet"
    href="/css/syntax-light.min.9602bc2fcef52b4c62e05eae14b48ba428e114f116e993e504d83ed5a3aeda98.css"
    integrity="sha256-lgK8L871K0xi4F6uFLSLpCjhFPEW6ZPlBNg&#43;1aOu2pg="
    id="syntax-light-theme"
    class="syntax-theme"
    disabled><script>
  
  (function () {
    const storedTheme = localStorage.getItem("theme");
    const systemPrefersLight = window.matchMedia("(prefers-color-scheme: light)").matches;
    const theme = storedTheme || (systemPrefersLight ? "light" : "dark");

    const syntaxDark = document.getElementById("syntax-dark-theme");
    const syntaxLight = document.getElementById("syntax-light-theme");

    if (theme === "light") {
      if (syntaxDark) syntaxDark.disabled = true;
      if (syntaxLight) syntaxLight.disabled = false;
    } else {
      if (syntaxDark) syntaxDark.disabled = false;
      if (syntaxLight) syntaxLight.disabled = true;
    }

    
    const observer = new MutationObserver(() => {
      const currentTheme = document.documentElement.getAttribute("data-theme");
      if (currentTheme === "light") {
        if (syntaxDark) syntaxDark.disabled = true;
        if (syntaxLight) syntaxLight.disabled = false;
      } else {
        if (syntaxDark) syntaxDark.disabled = false;
        if (syntaxLight) syntaxLight.disabled = true;
      }
    });

    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["data-theme"],
    });
  })();
</script>




<link
  rel="stylesheet"
  href="/css/bundle.min.d430be27649a3685c7891f7076e3e50f97bf39aabb96c243b89902f3dc6c9ead.css"
  integrity="sha256-1DC&#43;J2SaNoXHiR9wduPlD5e/Oaq7lsJDuJkC89xsnq0=">





<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

<link rel="icon" type="image/png" href="/favicon.png">

<link rel="icon" type="image/png" sizes="32x32" href="/favicon/logo-transparent/favicon-32x32.png">

<link rel="icon" type="image/png" sizes="16x16" href="/favicon/logo-transparent/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/logo-transparent/apple-touch-icon.png">
<link
  rel="icon"
  type="image/png"
  sizes="192x192"
  href="/favicon/logo-transparent/android-chrome-192x192.png">
<link
  rel="icon"
  type="image/png"
  sizes="512x512"
  href="/favicon/logo-transparent/android-chrome-512x512.png">
<link rel="manifest" href="/favicon/logo-transparent/site.webmanifest">




  




  </head>
  <body class="flex flex-col min-h-screen">
    <a href="#main-content" class="skip-to-main" aria-label="Skip to main content"
      >Skip to main content</a
    >
    <header class="sticky-header">
      <div class="header-container">
        <nav class="header-nav" role="navigation" aria-label="Main navigation">
  <div class="header-content">
    <div class="header-logo">
      <a href="/" class="logo-link" aria-label="Home - Tobys Portfolio">
        Tobys Portfolio
      </a>
    </div>

    
    <button 
      id="mobile-menu-toggle" 
      class="mobile-menu-toggle" 
      aria-label="Toggle menu" 
      aria-expanded="false"
      type="button">
      <span class="hamburger-icon">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </span>
    </button>

    <div class="header-menu">
      <ul class="menu-list">
  
    <li class="menu-item">
      <a
        href="/"
        class="menu-link ">
        Home
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/posts/"
        class="menu-link ">
        Posts
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/tags/"
        class="menu-link ">
        Tags
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/projects/"
        class="menu-link ">
        Projects
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/about/"
        class="menu-link ">
        About
      </a>
    </li>
  
</ul>


      <button id="search-toggle" class="search-toggle" aria-label="Search" type="button">
        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </button>

      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" type="button">
  <svg class="icon-sun" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
  </svg>
  <svg class="icon-moon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
  </svg>
</button>

    </div>
  </div>

  
  <div id="mobile-menu" class="mobile-menu" aria-hidden="true">
    <div class="mobile-menu-overlay"></div>
    <div class="mobile-menu-content">
      <div class="mobile-menu-header">
        <span class="mobile-menu-title">Menu</span>
        <button 
          id="mobile-menu-close" 
          class="mobile-menu-close" 
          aria-label="Close menu" 
          type="button">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <nav class="mobile-menu-nav" role="navigation" aria-label="Mobile navigation">
        <ul class="menu-list">
  
    <li class="menu-item">
      <a
        href="/"
        class="menu-link ">
        Home
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/posts/"
        class="menu-link ">
        Posts
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/tags/"
        class="menu-link ">
        Tags
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/projects/"
        class="menu-link ">
        Projects
      </a>
    </li>
  
    <li class="menu-item">
      <a
        href="/about/"
        class="menu-link ">
        About
      </a>
    </li>
  
</ul>

      </nav>
      <div class="mobile-menu-footer">
        <button id="mobile-search-toggle" class="mobile-search-toggle" aria-label="Search" type="button">
          <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <span>Search</span>
        </button>
        <button class="theme-toggle" aria-label="Toggle theme" type="button">
          <svg class="icon-sun" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
          <svg class="icon-moon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
</nav>

      </div>
    </header>

    <main id="main-content" class="flex-1" role="main">
      
  <div class="single-post-wrapper">
    <article class="single-post">
      







      <header class="post-header">
        <h1 class="post-title-main">Backend design - MORE CRUD!</h1>

        

        <div class="post-meta">
  <div class="post-meta-info">
    <time datetime="2026-02-15T14:14:59&#43;01:00" class="post-date">
      <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      February 15, 2026
    </time>

    <span class="meta-separator">•</span>

    
      <span class="post-word-count">
        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        677 words
      </span>
    

    
      <span class="meta-separator">•</span>
      <span class="post-reading-time">
        <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        4 min
      </span>
    
  </div>

  
    <div class="post-tags">
      
        <a href="/tags/java" class="post-tag">java</a>
      
        <a href="/tags/orm" class="post-tag">ORM</a>
      
        <a href="/tags/jpql" class="post-tag">JPQL</a>
      
        <a href="/tags/database" class="post-tag">database</a>
      
    </div>
  
</div>

      </header>

      <div class="post-content-main">
        <h1 id="designing-the-backend-domain---jpa-relations-and-queries">Designing the Backend Domain - JPA, Relations, and Queries</h1>
<p>This phase of the project has focused entirely on building a solid backend foundation using <strong>Java, JPA, Hibernate, and PostgreSQL</strong>.</p>
<p>The goal was not to build features quickly, but to design a domain model and persistence layer that:</p>
<ul>
<li>reflects real-world relationships</li>
<li>is easy to reason about</li>
<li>can be extended safely as new technologies are introduced later in the semester</li>
</ul>
<h2 id="domain-driven-database-design-with-jpa">Domain-driven database design with JPA</h2>
<p>Instead of starting with SQL tables, I designed the system around <strong>domain concepts</strong>, letting JPA handle table creation and relationships.</p>
<p>The core entities in the system are:</p>
<ul>
<li>Company</li>
<li>User</li>
<li>Membership</li>
<li>MembershipType</li>
<li>Location</li>
<li>CheckIn</li>
</ul>
<p>Each entity maps directly to a database table using JPA annotations.</p>
<p>This approach helped me think in <strong>objects and relationships</strong>, rather than rows and columns.</p>
<h2 id="primary-keys-and-identity">Primary keys and identity</h2>
<p>All entities use surrogate primary keys:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>Using generated IDs simplifies relationships and avoids coupling the domain model to business-specific identifiers.</p>
<h2 id="foreign-keys-through-object-references">Foreign keys through object references</h2>
<p>Instead of storing foreign key IDs manually, relationships are represented using object references.</p>
<p>For example, each user belongs to a company:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@ManyToOne</span><span class="p">(</span><span class="n">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FetchType</span><span class="p">.</span><span class="na">LAZY</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;company_id&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">private</span><span class="w"> </span><span class="n">Company</span><span class="w"> </span><span class="n">company</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>This creates a foreign key in the database (company_id) while allowing the Java code to work with objects rather than IDs.</p>
<p>Hibernate handles the translation automatically.</p>
<p>This was a key learning point: well-designed object relationships drastically reduce boilerplate code.</p>
<h2 id="separating-membership-data-from-users">Separating membership data from users</h2>
<p>Rather than placing membership-related fields directly on the User entity, membership data is modeled as its own entity.</p>
<p>A Membership represents a time-bound relationship between:</p>
<ul>
<li>a User</li>
<li>a MembershipType</li>
</ul>
<p>It also includes:</p>
<ul>
<li>startDate</li>
<li>endDate</li>
<li>a MembershipStatus enum</li>
</ul>
<p>This design allows:</p>
<ul>
<li>membership history</li>
<li>cancellations and pauses</li>
<li>reactivation without data loss</li>
</ul>
<p>Separating this logic early prevents destructive updates and keeps the model flexible.</p>
<h2 id="enums-and-database-safety">Enums and database safety</h2>
<p>Enums such as Role and MembershipStatus are stored using:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Enumerated</span><span class="p">(</span><span class="n">EnumType</span><span class="p">.</span><span class="na">STRING</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>Storing enums as strings:</p>
<ul>
<li>improves database readability</li>
<li>prevents bugs caused by enum reordering</li>
<li>makes debugging and querying easier</li>
</ul>
<h2 id="dao-structure-and-responsibility">DAO structure and responsibility</h2>
<p>Each entity has a corresponding DAO implementing a shared <code>IDAO&lt;T&gt;</code> interface, providing basic CRUD functionality.</p>
<p>More complex queries are implemented as specific methods in the DAO where they logically belong.</p>
<p>For example:</p>
<ul>
<li>UserDAO handles user-related queries</li>
<li>MembershipDAO handles membership-related business logic</li>
</ul>
<p>Even when a membership-related query returns User objects, it still belongs in MembershipDAO, because the definition of “active” depends on membership state.</p>
<p>This separation keeps responsibilities clear and avoids bloated DAO classes.</p>
<h2 id="jpql-and-joins">JPQL and joins</h2>
<p>JPQL was used instead of raw SQL to query the database.</p>
<p>JPQL operates on:</p>
<ul>
<li>entities</li>
<li>fields</li>
<li>relationships</li>
</ul>
<p>Rather than tables and columns.
Example: finding active members of a company</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">u</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">Membership</span><span class="w"> </span><span class="n">m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">JOIN</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="k">user</span><span class="w"> </span><span class="n">u</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">WHERE</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">company</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">companyId</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">status</span><span class="w">
</span></span></span></code></pre></div><p>This query:</p>
<ul>
<li>joins Membership and User</li>
<li>filters by company</li>
<li>filters by membership status</li>
<li>returns users directly</li>
</ul>
<p>The use of DISTINCT ensures that users are not duplicated if multiple records exist.</p>
<h2 id="managing-entity-state-with-jpa">Managing entity state with JPA</h2>
<p>When creating or updating entities, related objects may be detached from the persistence context.</p>
<p>To handle this safely, related entities are merged explicitly:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Company</span><span class="w"> </span><span class="n">managedCompany</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">merge</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getCompany</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">user</span><span class="p">.</span><span class="na">setCompany</span><span class="p">(</span><span class="n">managedCompany</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><p>This ensures Hibernate works with managed entities and avoids persistence errors.</p>
<p>Understanding managed vs detached entities was one of the more important lessons in this phase.</p>
<h2 id="manual-integration-testing-via-main">Manual integration testing via Main</h2>
<p>Before introducing automated tests, a Main class is used to manually test the persistence layer.</p>
<p>This setup:</p>
<ul>
<li>creates realistic test data</li>
<li>verifies entity mappings</li>
<li>tests updates and deletes</li>
<li>validates JPQL queries</li>
</ul>
<p>While not a replacement for proper testing, this approach provided valuable insight into how Hibernate behaves at runtime.</p>
<h2 id="key-takeaways">Key takeaways</h2>
<p>Some of the most important lessons from this phase:</p>
<ul>
<li>JPA relationships are easier to reason about than manual foreign keys</li>
<li>A clean domain model simplifies queries and future features</li>
<li>JPQL encourages domain-oriented thinking</li>
<li>Correct planning of relations pays off immediately</li>
</ul>
<p>The current state of the backend provides a stable foundation for introducing service layers, validation, REST endpoints, and security in the next stages of the project.</p>

      </div>

      
        <footer class="post-footer">
          <div class="post-tags-footer">
            <span class="tags-label">Tags:</span>
            
              <a href="/tags/java" class="post-tag">java</a>
            
              <a href="/tags/orm" class="post-tag">ORM</a>
            
              <a href="/tags/jpql" class="post-tag">JPQL</a>
            
              <a href="/tags/database" class="post-tag">database</a>
            
          </div>
        </footer>
      


      <nav class="post-navigation" aria-label="Post navigation">
        
          <a
            href="/posts/week1-starting-the-project/"
            class="nav-link nav-prev"
            aria-label="Previous post: How I get started!">
            <span class="nav-label">Previous</span>
            <span class="nav-title">How I get started!</span>
          </a>
        

        
      </nav>
    </article>

    
  <aside class="post-toc" id="post-toc" aria-label="Table of contents">
    <button
      class="toc-toggle"
      id="toc-toggle"
      aria-expanded="true"
      aria-controls="toc-content"
      aria-label="Toggle table of contents">
      <svg
        class="toc-burger-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
      <span class="toc-toggle-text">Table of Contents</span>
      <svg
        class="toc-chevron-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </button>
    <div class="toc-content" id="toc-content">
      <nav class="toc-nav" aria-label="Table of contents">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#designing-the-backend-domain---jpa-relations-and-queries">Designing the Backend Domain - JPA, Relations, and Queries</a>
      <ul>
        <li><a href="#domain-driven-database-design-with-jpa">Domain-driven database design with JPA</a></li>
        <li><a href="#primary-keys-and-identity">Primary keys and identity</a></li>
        <li><a href="#foreign-keys-through-object-references">Foreign keys through object references</a></li>
        <li><a href="#separating-membership-data-from-users">Separating membership data from users</a></li>
        <li><a href="#enums-and-database-safety">Enums and database safety</a></li>
        <li><a href="#dao-structure-and-responsibility">DAO structure and responsibility</a></li>
        <li><a href="#jpql-and-joins">JPQL and joins</a></li>
        <li><a href="#managing-entity-state-with-jpa">Managing entity state with JPA</a></li>
        <li><a href="#manual-integration-testing-via-main">Manual integration testing via Main</a></li>
        <li><a href="#key-takeaways">Key takeaways</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </nav>
    </div>
  </aside>


  </div>

    </main>

    <footer>
      <footer class="site-footer">
  <div class="footer-content">
    <p class="footer-text">
      &copy;
      
      2026
      
      Tobys Portfolio.
      
        Built with Hugo and Mana theme
      
    </p>
    
      <div class="footer-social">
        <div class="social-links">
  
    <a
      href="https://github.com/Obliwobbi"
      target="_blank"
      rel="noopener noreferrer"
      class="social-link"
      aria-label="GitHub">
      <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path
          fill-rule="evenodd"
          d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
          clip-rule="evenodd"></path>
      </svg>
    </a>
  

  
    <a
      href="https://www.linkedin.com/in/tahartzberg"
      target="_blank"
      rel="noopener noreferrer"
      class="social-link"
      aria-label="LinkedIn">
      <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path>
      </svg>
    </a>
  

  
</div>

      </div>
    
  </div>
</footer>

    </footer>

    <div id="search-modal" class="search-modal" aria-hidden="true" role="dialog" aria-label="Search">
  <div class="search-modal-backdrop" id="search-modal-backdrop"></div>
  <div class="search-modal-container">
    <div class="search-input-wrapper">
      <svg class="search-input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
      <input
        type="search"
        id="search-input"
        class="search-input"
        placeholder="Search..."
        autocomplete="off"
        aria-label="Search input">
      <button class="search-input-clear" id="search-input-clear" aria-label="Clear search">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
      </button>
      <button class="search-modal-close" id="search-modal-close" aria-label="Close search">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div id="search-results" class="search-results"></div>
  </div>
</div>

    

    <button id="scroll-to-top" class="scroll-to-top" aria-label="Scroll to top" type="button">
  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
  </svg>
</button>


    










<script src="/js/main.min.cdc6a3c4f498c0556bc507848c493a55af2da9b14233c21300b240b89857180d.js" defer></script>

  </body>
</html>
